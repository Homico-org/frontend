name: Deploy

on:
  push:
    branches: [dev, main]
  workflow_dispatch:

permissions:
  contents: read

jobs:
  deploy-dev:
    name: Deploy (dev)
    if: github.ref == 'refs/heads/dev' && secrets.RENDER_DEPLOY_HOOK_URL_DEV != ''
    runs-on: ubuntu-latest
    steps:
      - name: Trigger Render deploy hook (dev)
        run: |
          curl -fsSL -X POST "${{ secrets.RENDER_DEPLOY_HOOK_URL_DEV }}"

  deploy-main:
    name: Deploy (main)
    if: github.ref == 'refs/heads/main' && secrets.RENDER_DEPLOY_HOOK_URL_MAIN != ''
    runs-on: ubuntu-latest
    steps:
      - name: Trigger Render deploy hook (main)
        run: |
          curl -fsSL -X POST "${{ secrets.RENDER_DEPLOY_HOOK_URL_MAIN }}"

name: Deploy Frontend

on:
  push:
    branches:
      - main
      - dev

jobs:
  deploy-production:
    if: github.ref == 'refs/heads/main'
    runs-on: ubuntu-latest
    name: Deploy to Production
    steps:
      - name: Trigger Render Deploy
        run: |
          curl -X POST "${{ secrets.RENDER_DEPLOY_HOOK_FRONTEND_PROD }}"
          echo "Triggered production frontend deployment"

  deploy-development:
    if: github.ref == 'refs/heads/dev'
    runs-on: ubuntu-latest
    name: Deploy to Development
    steps:
      - name: Trigger Render Deploy
        run: |
          curl -X POST "${{ secrets.RENDER_DEPLOY_HOOK_FRONTEND_DEV }}"
          echo "Triggered development frontend deployment"
